# Debug Output Directory

This directory contains debug artifacts generated by the kano-backlog system.

## Contents

### `backlog_config.toml`

The **effective configuration** file showing the final merged configuration values used by the backlog system. This file is only generated when debug mode is enabled.

**What it contains:**
- `[context]` - Runtime context (project root, backlog root, product info, etc.)
- `[config]` - Complete merged configuration including:
  - System defaults (hardcoded in the skill)
  - Project-level settings (from `.kano/backlog_config.toml`)
  - Product-specific overrides
  - All computed/derived values

**Purpose:**
- Debugging configuration issues
- Understanding which values are being used at runtime
- Verifying configuration precedence and merging behavior
- Troubleshooting unexpected behavior

## Enabling Debug Mode

Debug output is controlled by the `log.debug` setting in your configuration.

### Method 1: Project-level config (recommended)

Edit `.kano/backlog_config.toml`:

```toml
[shared.log]
debug = true
```

### Method 2: Product-specific override

```toml
[products.my-product.overrides]
"log.debug" = true
```

### Method 3: Environment variable

```bash
export KANO_BACKLOG_DEBUG=1
```

## When is the file generated?

The `backlog_config.toml` file is automatically generated when:
1. Debug mode is enabled (`log.debug = true`)
2. You run `kano view refresh` command

If debug mode is disabled, the file generation is skipped to avoid clutter.

## File Format

The file uses TOML format with two main sections:

```toml
[context]
project_root = "/path/to/project"
backlog_root = "/path/to/backlog"
product_name = "my-product"
# ... other context fields

[config]
[config.product]
name = "my-product"
prefix = "MP"

[config.log]
debug = true
level = "INFO"

[config.index]
enabled = true
backend = "sqlite"

# ... all other configuration sections
```

## Gitignore

This directory is excluded from version control (`.gitignore` rule: `.kano/debug/`).

Debug output is environment-specific and should not be committed to the repository.

## Troubleshooting

### File not being generated?

1. Check if debug mode is enabled:
   ```bash
   kano config show --product my-product | grep -A2 '"log"'
   ```

2. Verify the setting in your config file:
   ```bash
   cat .kano/backlog_config.toml | grep -A2 '\[shared.log\]'
   ```

3. Try running view refresh explicitly:
   ```bash
   kano view refresh --agent your-agent --product my-product
   ```

### File contains unexpected values?

The effective config shows the **final merged result** from multiple layers:
1. System defaults (lowest priority)
2. Project-level defaults (`[defaults]` section)
3. Shared settings (`[shared.*]` sections)
4. Product-specific overrides (`[products.*.overrides]`)

Check each layer to understand where a value is coming from.

## Related Commands

```bash
# Show effective config (JSON output)
kano config show --product my-product

# Export effective config to custom location
kano config export --product my-product --out /path/to/output.toml

# Validate configuration
kano config validate --product my-product

# Refresh views (triggers debug output if enabled)
kano view refresh --agent your-agent --product my-product
```

## See Also

- Project config: `.kano/backlog_config.toml`
- Backlog root: `_kano/backlog/`
- Skill documentation: `skills/kano-agent-backlog-skill/SKILL.md`
